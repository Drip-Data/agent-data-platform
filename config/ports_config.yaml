# Agent Data Platform ç«¯å£é…ç½®
# ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æœåŠ¡ç«¯å£ï¼Œé¿å…å†²çª

# ğŸš€ æ ¸å¿ƒæœåŠ¡ç«¯å£
core_services:
  task_api:
    port: 8000
    description: "ä»»åŠ¡æäº¤å’ŒæŸ¥è¯¢API"
    health_endpoint: "/health"
    
  redis:
    port: 6379
    description: "Redisä»»åŠ¡é˜Ÿåˆ—å’Œç¼“å­˜"
    
# ğŸ”§ MCPæœåŠ¡å™¨ç«¯å£  
mcp_servers:  
  toolscore_mcp:
    port: 8089 # å°†ç«¯å£ä»8090æ›´æ”¹ä¸º8089ï¼Œä»¥é¿å…å†²çª
    description: "ToolScore MCPåè®®æœåŠ¡å™¨"
    protocol: "websocket"
    endpoint: "/websocket"
    # æ˜ç¡®ç¦ç”¨ToolScore MCPçš„è‡ªåŠ¨ç«¯å£æ£€æµ‹ï¼Œç¡®ä¿å®ƒå§‹ç»ˆä½¿ç”¨8089
    auto_detect_port: false
    
  toolscore_http:
    port: 8088
    description: "ToolScore HTTPç›‘æ§API"
    protocol: "http"
    health_endpoint: "/health"
    
  # python_executor:  # å·²æ›¿æ¢ä¸ºmicrosandbox
  #   port: 8081
  #   description: "Pythonä»£ç æ‰§è¡Œå™¨ï¼ˆå·²å¼ƒç”¨ï¼‰"
  #   protocol: "websocket"
  #   health_endpoint: "/health"
  #   auto_start: false
    
  microsandbox_mcp:
    port: 8090
    description: "MicroSandbox MCPæœåŠ¡å™¨ - å®‰å…¨ä»£ç æ‰§è¡Œ"
    protocol: "websocket"
    health_endpoint: "/health"
    auto_start: true
    type: "internal"  # å†…éƒ¨MCPæœåŠ¡å™¨
    
  # microsandbox_service:  # ä¿ç•™å¤–éƒ¨microsandboxæœåŠ¡é…ç½®ä¾›å‚è€ƒ
  #   port: 5555
  #   description: "MicroSandboxå¤–éƒ¨æœåŠ¡ï¼ˆç”±msb serverç®¡ç†ï¼‰"
  #   protocol: "http"
  #   type: "external"
  #   auto_start: true
  #   startup_method: "process"
  #   start_command: "msb server start --detach --dev"
  #   stop_command: "msb server stop"
  #   health_endpoint: "/health"
    
  browser_navigator:
    port: 8082 # åˆå§‹é…ç½®ç«¯å£ï¼Œä½†ä¼šå—auto_detectå½±å“
    description: "æµè§ˆå™¨å¯¼èˆªå™¨MCPæœåŠ¡å™¨"
    protocol: "websocket"
    health_endpoint: "/health"
    auto_start: true
  search_tool:
    port: 8080 # æœç´¢å·¥å…·MCPæœåŠ¡å™¨
    description: "æ–‡ä»¶å†…å®¹æœç´¢å’Œä»£ç å®šä¹‰æœç´¢å·¥å…·æœåŠ¡å™¨"
    protocol: "websocket"
    health_endpoint: "/health"
    auto_start: true

# ğŸ†• æœªæ¥æ‰©å±•ç«¯å£é¢„ç•™
future_mcp_servers:
# ğŸ†• æœªæ¥æ‰©å±•ç«¯å£é¢„ç•™
#   web_scraper:
#     port: 8084
#     description: "ç½‘é¡µæŠ“å–å·¥å…·æœåŠ¡å™¨"
#     auto_start: false
    
#   file_manager:
#     port: 8085
#     description: "æ–‡ä»¶ç®¡ç†å·¥å…·æœåŠ¡å™¨"
#     auto_start: false
    
#   database_connector:
#     port: 8086
#     description: "æ•°æ®åº“è¿æ¥å·¥å…·æœåŠ¡å™¨"
#     auto_start: false
    
#   image_processor:
#     port: 8087
#     description: "å›¾åƒå¤„ç†å·¥å…·æœåŠ¡å™¨"
#     auto_start: false

# ğŸ”§ ç«¯å£ç®¡ç†é…ç½®
port_management:
  auto_detect: false        # ç¦ç”¨è‡ªåŠ¨æ£€æµ‹ï¼Œä½¿ç”¨å›ºå®šç«¯å£ä»¥ç¡®ä¿APIå¯è®¿é—®æ€§
  port_range_start: 8100     # åŠ¨æ€åˆ†é…èµ·å§‹ç«¯å£ï¼Œé¿å…ä¸toolscore_mcp (8089) å†²çª
  port_range_end: 8200       # åŠ¨æ€åˆ†é…ç»“æŸç«¯å£
  check_interval: 30         # å¥åº·æ£€æŸ¥é—´éš”(ç§’)
  
# ğŸŒ åå‘ä»£ç†é…ç½® (å¯é€‰)
reverse_proxy:
  enabled: false
  port: 80
  ssl_port: 443
  routes:
    "/api/v1/tasks": "http://localhost:8000"
    "/api/v1/tools": "http://localhost:8082"
    "/ws/mcp": "ws://localhost:8089"