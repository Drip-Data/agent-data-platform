# ğŸ”§ P1ä¿®å¤2: ç»Ÿä¸€å·¥å…·IDå’ŒåŠ¨ä½œæ˜ å°„é…ç½®
# è¿™æ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰å·¥å…·æ˜ å°„çš„å•ä¸€çœŸå®æ¥æº(Single Source of Truth)

# å·¥å…·IDæ˜ å°„ - è§„èŒƒåŒ–å·¥å…·æ ‡è¯†ç¬¦
tool_id_mappings:
  # æ ‡å‡†åŒ–å·¥å…·ID
  canonical_tool_ids:
    - deepsearch
    - microsandbox  
    - browser_use
    - mcp-search-tool
  
  # å·¥å…·IDåˆ«åæ˜ å°„
  tool_aliases:
    # DeepSearchå·¥å…·åˆ«å
    mcp-deepsearch: deepsearch
    deep-search: deepsearch
    research-tool: deepsearch
    search-engine: deepsearch
    
    # MicroSandboxå·¥å…·åˆ«å
    microsandbox-mcp-server: microsandbox
    sandbox: microsandbox
    code-runner: microsandbox
    python-executor: microsandbox
    
    # Browserå·¥å…·åˆ«å
    browser-use-mcp-server: browser_use
    browser: browser_use
    web-browser: browser_use
    browser-automation: browser_use
    web-automation: browser_use
    
    # Searchå·¥å…·åˆ«å
    search-tool: mcp-search-tool
    file-search: mcp-search-tool
    code-search: mcp-search-tool

# åŠ¨ä½œæ˜ å°„ - ç»Ÿä¸€æ‰€æœ‰å·¥å…·çš„åŠ¨ä½œåç§°
action_mappings:
  # DeepSearchå·¥å…·åŠ¨ä½œ
  deepsearch:
    canonical_actions:
      - research
      - quick_research
      - comprehensive_research
    
    action_aliases:
      # ç ”ç©¶ç›¸å…³åˆ«å
      search: research
      investigate: research
      analyze: research
      study: research
      explore: research
      lookup: research
      find: research
      query: research
      
      # å¿«é€Ÿç ”ç©¶åˆ«å
      quick_search: quick_research
      fast_research: quick_research
      brief_research: quick_research
      
      # å…¨é¢ç ”ç©¶åˆ«å
      deep_research: comprehensive_research
      detailed_research: comprehensive_research
      thorough_research: comprehensive_research
      full_research: comprehensive_research

  # MicroSandboxå·¥å…·åŠ¨ä½œ
  microsandbox:
    canonical_actions:
      - microsandbox_execute
      - microsandbox_install_package
      - microsandbox_list_sessions
      - microsandbox_close_session
      - microsandbox_cleanup_expired
    
    action_aliases:
      # æ‰§è¡Œç›¸å…³åˆ«å
      execute: microsandbox_execute
      run: microsandbox_execute
      exec: microsandbox_execute
      python_execute: microsandbox_execute
      run_code: microsandbox_execute
      execute_code: microsandbox_execute
      run_python: microsandbox_execute
      python_run: microsandbox_execute
      
      # å®‰è£…åŒ…åˆ«å
      install: microsandbox_install_package
      install_package: microsandbox_install_package
      pip_install: microsandbox_install_package
      add_package: microsandbox_install_package
      
      # ä¼šè¯ç®¡ç†åˆ«å
      list_sessions: microsandbox_list_sessions
      get_sessions: microsandbox_list_sessions
      show_sessions: microsandbox_list_sessions
      
      close_session: microsandbox_close_session
      end_session: microsandbox_close_session
      terminate_session: microsandbox_close_session
      
      cleanup: microsandbox_cleanup_expired
      clean: microsandbox_cleanup_expired
      purge: microsandbox_cleanup_expired

  # Browserå·¥å…·åŠ¨ä½œ  
  browser_use:
    canonical_actions:
      - browser_navigate
      - browser_extract_content
      - browser_click_element
      - browser_input_text
      - browser_search_google
      - browser_use_execute_task
    
    action_aliases:
      # å¯¼èˆªç›¸å…³åˆ«åï¼ˆå·²å¼ƒç”¨çš„æ˜ å°„ï¼‰
      navigate_to_url: browser_navigate
      navigate: browser_navigate
      goto: browser_navigate
      visit: browser_navigate
      open: browser_navigate
      browse: browser_navigate
      
      # å†…å®¹æå–åˆ«å
      get_page_content: browser_extract_content
      extract_content: browser_extract_content
      get_content: browser_extract_content
      read_page: browser_extract_content
      scrape: browser_extract_content
      extract: browser_extract_content
      
      # ç‚¹å‡»ç›¸å…³åˆ«å
      click_element: browser_click_element
      click: browser_click_element
      tap: browser_click_element
      select: browser_click_element
      
      # è¾“å…¥ç›¸å…³åˆ«å
      input_text: browser_input_text
      type_text: browser_input_text
      type: browser_input_text
      input: browser_input_text
      fill: browser_input_text
      enter_text: browser_input_text
      
      # æœç´¢ç›¸å…³åˆ«å
      search_google: browser_search_google
      google_search: browser_search_google
      search: browser_search_google
      
      # æ‰§è¡Œä»»åŠ¡åˆ«å
      execute_task: browser_use_execute_task
      run_task: browser_use_execute_task
      perform_task: browser_use_execute_task

  # Searchå·¥å…·åŠ¨ä½œ
  mcp-search-tool:
    canonical_actions:
      - analyze_tool_needs
      - search_and_install_tools
      - search_file_content
      - list_code_definitions
    
    action_aliases:
      # å·¥å…·åˆ†æåˆ«å
      analyze_needs: analyze_tool_needs
      check_needs: analyze_tool_needs
      assess_requirements: analyze_tool_needs
      
      # å·¥å…·æœç´¢å®‰è£…åˆ«å
      search_tools: search_and_install_tools
      find_tools: search_and_install_tools
      install_tools: search_and_install_tools
      
      # æ–‡ä»¶æœç´¢åˆ«å
      search_files: search_file_content
      find_in_files: search_file_content
      grep: search_file_content
      search_code: search_file_content
      
      # ä»£ç å®šä¹‰åˆ«å
      list_definitions: list_code_definitions
      find_definitions: list_code_definitions
      get_definitions: list_code_definitions

# å‚æ•°æ˜ å°„ - ç»Ÿä¸€å‚æ•°åç§°
parameter_mappings:
  # é€šç”¨å‚æ•°åˆ«å
  common_aliases:
    # æŸ¥è¯¢/é—®é¢˜ç›¸å…³
    query: question
    search_query: question  
    search_term: question
    task_description: question
    research_topic: question
    content: question
    text: question
    prompt: question
    
    # æ–‡ä»¶è·¯å¾„ç›¸å…³
    file_path: path
    filename: path
    file: path
    filepath: path
    
    # ä»£ç ç›¸å…³
    script: code
    program: code
    source_code: code
    
    # é€‰æ‹©å™¨ç›¸å…³
    selector: index
    element_selector: index
    css_selector: index
    xpath: index

  # å·¥å…·ç‰¹å®šå‚æ•°æ˜ å°„
  tool_specific:
    deepsearch:
      # æŸ¥è¯¢å‚æ•°ç»Ÿä¸€ä¸ºquestion
      query: question
      search_query: question
      task_description: question
      research_topic: question
      research_query: question
      search_term: question
      search_content: question
      topic: question
      content: question
      text: question
      keywords: question
      subject: question
      prompt: question
      description: question
      objective: question
      goal: question
      task: question
      requirement: question
      request: question

    microsandbox:
      # ä»£ç å‚æ•°ç»Ÿä¸€
      script: code
      program: code
      source_code: code
      python_code: code
      code_text: code
      source: code
      
    browser_use:
      # é€‰æ‹©å™¨å‚æ•°ç»Ÿä¸€ä¸ºindex
      selector: index
      element_selector: index
      css_selector: index
      xpath: index
      element_index: index
      target: index
      position: index
      number: index
      
      # URLå‚æ•°
      navigate_to_url: url
      target_url: url
      page_url: url
      website: url
      link: url

# é”™è¯¯ä¿®æ­£æ˜ å°„ - å¸¸è§é”™è¯¯çš„è‡ªåŠ¨ä¿®æ­£
error_corrections:
  # åŠ¨ä½œåç§°é”™è¯¯ä¿®æ­£
  action_errors:
    "ä¸æ”¯æŒåŠ¨ä½œ navigate_to_url":
      correct_action: browser_navigate
      correct_tool: browser_use
      
    "ä¸æ”¯æŒåŠ¨ä½œ get_page_content":
      correct_action: browser_extract_content
      correct_tool: browser_use
      
    "ä¸æ”¯æŒåŠ¨ä½œ click_element":
      correct_action: browser_click_element
      correct_tool: browser_use
      
    "ä¸æ”¯æŒåŠ¨ä½œ execute":
      correct_action: microsandbox_execute
      correct_tool: microsandbox
      
    "ä¸æ”¯æŒåŠ¨ä½œ search":
      correct_action: research
      correct_tool: deepsearch

  # å‚æ•°é”™è¯¯ä¿®æ­£
  parameter_errors:
    "ç¼ºå°‘å‚æ•° question":
      parameter_mappings:
        query: question
        search_query: question
        task_description: question
        
    "ç¼ºå°‘å‚æ•° code":
      parameter_mappings:
        script: code
        program: code
        source_code: code
        
    "ç¼ºå°‘å‚æ•° index":
      parameter_mappings:
        selector: index
        element_selector: index
        css_selector: index

# éªŒè¯è§„åˆ™ - ç¡®ä¿æ˜ å°„çš„ä¸€è‡´æ€§
validation_rules:
  # å¿…éœ€çš„å·¥å…·åŠ¨ä½œç»„åˆ
  required_combinations:
    - tool_id: deepsearch
      action: research
      required_params: [question]
      
    - tool_id: microsandbox
      action: microsandbox_execute
      required_params: [code]
      
    - tool_id: browser_use
      action: browser_navigate
      required_params: [url]
      
    - tool_id: browser_use
      action: browser_click_element
      required_params: [index]

  # ç¦ç”¨çš„åŠ¨ä½œç»„åˆ
  deprecated_combinations:
    - tool_id: browser_use
      action: navigate_to_url
      replacement:
        action: browser_navigate
        
    - tool_id: browser_use
      action: get_page_content
      replacement:
        action: browser_extract_content
        
    - tool_id: browser_use
      action: click_element
      replacement:
        action: browser_click_element

# é…ç½®å…ƒæ•°æ®
metadata:
  version: "1.0.0"
  last_updated: "2025-01-24"
  schema_hash: "unified_v1_20250124"
  description: "ç»Ÿä¸€çš„å·¥å…·IDå’ŒåŠ¨ä½œæ˜ å°„é…ç½® - ç³»ç»Ÿçš„å•ä¸€çœŸå®æ¥æº"
  maintainer: "Agent Data Platform"