# ğŸ”§ P1ä¿®å¤2: ç»Ÿä¸€å·¥å…·IDå’ŒåŠ¨ä½œæ˜ å°„é…ç½®
# è¿™æ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰å·¥å…·æ˜ å°„çš„å•ä¸€çœŸå®æ¥æº(Single Source of Truth)

# å·¥å…·IDæ˜ å°„ - è§„èŒƒåŒ–å·¥å…·æ ‡è¯†ç¬¦
tool_id_mappings:
  # æ ‡å‡†åŒ–å·¥å…·ID
  canonical_tool_ids:
    - deepsearch
    - microsandbox  
    - browser_use
    - mcp-search-tool
  
  # å·¥å…·IDåˆ«åæ˜ å°„
  tool_aliases:
    # DeepSearchå·¥å…·åˆ«å
    mcp-deepsearch: deepsearch
    deep-search: deepsearch
    research-tool: deepsearch
    search-engine: deepsearch
    
    # MicroSandboxå·¥å…·åˆ«å
    microsandbox-mcp-server: microsandbox
    sandbox: microsandbox
    code-runner: microsandbox
    python-executor: microsandbox
    
    # Browserå·¥å…·åˆ«å
    browser-use-mcp-server: browser_use
    browser: browser_use
    web-browser: browser_use
    browser-automation: browser_use
    web-automation: browser_use
    
    # Searchå·¥å…·åˆ«å
    search-tool: mcp-search-tool
    file-search: mcp-search-tool
    code-search: mcp-search-tool

# åŠ¨ä½œæ˜ å°„ - ç»Ÿä¸€æ‰€æœ‰å·¥å…·çš„åŠ¨ä½œåç§°
action_mappings:
  # DeepSearchå·¥å…·åŠ¨ä½œ
  deepsearch:
    canonical_actions:
      - research
      - quick_research
      - comprehensive_research
    
    action_aliases:
      # ç ”ç©¶ç›¸å…³åˆ«å
      search: research
      investigate: research
      analyze: research
      study: research
      explore: research
      lookup: research
      find: research
      query: research
      
      # å¿«é€Ÿç ”ç©¶åˆ«å
      quick_search: quick_research
      fast_research: quick_research
      brief_research: quick_research
      
      # å…¨é¢ç ”ç©¶åˆ«å
      deep_research: comprehensive_research
      detailed_research: comprehensive_research
      thorough_research: comprehensive_research
      full_research: comprehensive_research

  # MicroSandboxå·¥å…·åŠ¨ä½œ - å®Œæ•´æ˜ å°„
  microsandbox:
    canonical_actions:
      - microsandbox_execute
      - microsandbox_install_package
      - microsandbox_list_sessions
      - microsandbox_close_session
      - microsandbox_cleanup_expired
      - microsandbox_get_performance_stats
      - microsandbox_get_health_status
    
    action_aliases:
      # æ‰§è¡Œç›¸å…³åˆ«å
      execute: microsandbox_execute
      run: microsandbox_execute
      exec: microsandbox_execute
      python_execute: microsandbox_execute
      run_code: microsandbox_execute
      execute_code: microsandbox_execute
      run_python: microsandbox_execute
      python_run: microsandbox_execute
      
      # å®‰è£…åŒ…åˆ«å
      install: microsandbox_install_package
      install_package: microsandbox_install_package
      pip_install: microsandbox_install_package
      add_package: microsandbox_install_package
      
      # ä¼šè¯ç®¡ç†åˆ«å
      list_sessions: microsandbox_list_sessions
      get_sessions: microsandbox_list_sessions
      show_sessions: microsandbox_list_sessions
      
      close_session: microsandbox_close_session
      end_session: microsandbox_close_session
      terminate_session: microsandbox_close_session
      
      cleanup: microsandbox_cleanup_expired
      clean: microsandbox_cleanup_expired
      purge: microsandbox_cleanup_expired
      
      # ç›‘æ§è¯Šæ–­åˆ«å
      get_stats: microsandbox_get_performance_stats
      performance: microsandbox_get_performance_stats
      stats: microsandbox_get_performance_stats
      
      health: microsandbox_get_health_status
      status: microsandbox_get_health_status
      check_health: microsandbox_get_health_status

  # Browserå·¥å…·åŠ¨ä½œ - å®Œæ•´æ˜ å°„ï¼ˆ26ä¸ªå·¥å…·ï¼‰
  browser_use:
    canonical_actions:
      # ğŸ§­ å¯¼èˆªæ§åˆ¶
      - browser_navigate
      - browser_go_back
      - browser_open_tab
      - browser_close_tab
      - browser_switch_tab
      
      # ğŸ–±ï¸ é¡µé¢äº¤äº’
      - browser_click_element
      - browser_input_text
      - browser_send_keys
      - browser_drag_drop
      
      # ğŸ“„ å†…å®¹æ“ä½œ
      - browser_extract_content
      - browser_search_google
      - browser_screenshot
      - browser_save_pdf
      
      # ğŸ“‹ è¡¨å•å¤„ç†
      - browser_get_dropdown_options
      - browser_select_dropdown_option
      
      # ğŸ” é¡µé¢åˆ†æ
      - browser_get_ax_tree
      - browser_get_page_info
      - browser_get_current_url
      
      # ğŸ“œ æ»šåŠ¨æ“ä½œ
      - browser_scroll_down
      - browser_scroll_up
      - browser_scroll_to_text
      
      # â±ï¸ æµç¨‹æ§åˆ¶
      - browser_wait
      - browser_done
      - browser_close_session
      
      # ğŸ¤– AIä»»åŠ¡æ‰§è¡Œ
      - browser_use_execute_task
    
    action_aliases:
      # ğŸ§­ å¯¼èˆªæ§åˆ¶åˆ«å
      navigate_to_url: browser_navigate
      navigate: browser_navigate
      goto: browser_navigate
      visit: browser_navigate
      open: browser_navigate
      browse: browser_navigate
      
      back: browser_go_back
      previous: browser_go_back
      return: browser_go_back
      
      new_tab: browser_open_tab
      open_new_tab: browser_open_tab
      create_tab: browser_open_tab
      
      close_tab: browser_close_tab
      end_tab: browser_close_tab
      
      switch_tab: browser_switch_tab
      change_tab: browser_switch_tab
      select_tab: browser_switch_tab
      
      # ğŸ–±ï¸ é¡µé¢äº¤äº’åˆ«å
      click_element: browser_click_element
      click: browser_click_element
      tap: browser_click_element
      select: browser_click_element
      
      input_text: browser_input_text
      type_text: browser_input_text
      type: browser_input_text
      input: browser_input_text
      fill: browser_input_text
      enter_text: browser_input_text
      
      send_keys: browser_send_keys
      press_keys: browser_send_keys
      key_press: browser_send_keys
      
      drag_drop: browser_drag_drop
      drag_and_drop: browser_drag_drop
      move_element: browser_drag_drop
      
      # ğŸ“„ å†…å®¹æ“ä½œåˆ«å
      get_page_content: browser_extract_content
      extract_content: browser_extract_content
      get_content: browser_extract_content
      read_page: browser_extract_content
      scrape: browser_extract_content
      extract: browser_extract_content
      
      search_google: browser_search_google
      google_search: browser_search_google
      search: browser_search_google
      
      screenshot: browser_screenshot
      capture: browser_screenshot
      take_screenshot: browser_screenshot
      
      save_pdf: browser_save_pdf
      export_pdf: browser_save_pdf
      print_pdf: browser_save_pdf
      
      # ğŸ“‹ è¡¨å•å¤„ç†åˆ«å
      get_dropdown: browser_get_dropdown_options
      list_options: browser_get_dropdown_options
      
      select_option: browser_select_dropdown_option
      choose_option: browser_select_dropdown_option
      pick_option: browser_select_dropdown_option
      
      # ğŸ” é¡µé¢åˆ†æåˆ«å
      get_tree: browser_get_ax_tree
      accessibility_tree: browser_get_ax_tree
      ax_tree: browser_get_ax_tree
      
      page_info: browser_get_page_info
      get_info: browser_get_page_info
      
      current_url: browser_get_current_url
      get_url: browser_get_current_url
      url: browser_get_current_url
      
      # ğŸ“œ æ»šåŠ¨æ“ä½œåˆ«å
      scroll_down: browser_scroll_down
      page_down: browser_scroll_down
      down: browser_scroll_down
      
      scroll_up: browser_scroll_up
      page_up: browser_scroll_up
      up: browser_scroll_up
      
      scroll_to: browser_scroll_to_text
      find_text: browser_scroll_to_text
      locate_text: browser_scroll_to_text
      
      # â±ï¸ æµç¨‹æ§åˆ¶åˆ«å
      wait: browser_wait
      pause: browser_wait
      sleep: browser_wait
      
      done: browser_done
      finish: browser_done
      complete: browser_done
      
      close_session: browser_close_session
      end_session: browser_close_session
      quit: browser_close_session
      
      # ğŸ¤– AIä»»åŠ¡æ‰§è¡Œåˆ«å
      execute_task: browser_use_execute_task
      run_task: browser_use_execute_task
      perform_task: browser_use_execute_task
      ai_task: browser_use_execute_task

  # Searchå·¥å…·åŠ¨ä½œ
  mcp-search-tool:
    canonical_actions:
      - analyze_tool_needs
      - search_and_install_tools
      - search_file_content
      - list_code_definitions
    
    action_aliases:
      # å·¥å…·åˆ†æåˆ«å
      analyze_needs: analyze_tool_needs
      check_needs: analyze_tool_needs
      assess_requirements: analyze_tool_needs
      
      # å·¥å…·æœç´¢å®‰è£…åˆ«å
      search_tools: search_and_install_tools
      find_tools: search_and_install_tools
      install_tools: search_and_install_tools
      
      # æ–‡ä»¶æœç´¢åˆ«å
      search_files: search_file_content
      find_in_files: search_file_content
      grep: search_file_content
      search_code: search_file_content
      
      # ä»£ç å®šä¹‰åˆ«å
      list_definitions: list_code_definitions
      find_definitions: list_code_definitions
      get_definitions: list_code_definitions

# å‚æ•°æ˜ å°„ - ç»Ÿä¸€å‚æ•°åç§°
parameter_mappings:
  # é€šç”¨å‚æ•°åˆ«å
  common_aliases:
    # æŸ¥è¯¢/é—®é¢˜ç›¸å…³
    query: question
    search_query: question  
    search_term: question
    task_description: question
    research_topic: question
    content: question
    text: question
    prompt: question
    
    # æ–‡ä»¶è·¯å¾„ç›¸å…³
    file_path: path
    filename: path
    file: path
    filepath: path
    
    # ä»£ç ç›¸å…³
    script: code
    program: code
    source_code: code
    
    # é€‰æ‹©å™¨ç›¸å…³
    selector: index
    element_selector: index
    css_selector: index
    xpath: index

  # å·¥å…·ç‰¹å®šå‚æ•°æ˜ å°„
  tool_specific:
    deepsearch:
      # æŸ¥è¯¢å‚æ•°ç»Ÿä¸€ä¸ºquestion
      query: question
      search_query: question
      task_description: question
      research_topic: question
      research_query: question
      search_term: question
      search_content: question
      topic: question
      content: question
      text: question
      keywords: question
      subject: question
      prompt: question
      description: question
      objective: question
      goal: question
      task: question
      requirement: question
      request: question

    microsandbox:
      # ä»£ç å‚æ•°ç»Ÿä¸€
      script: code
      program: code
      source_code: code
      python_code: code
      code_text: code
      source: code
      
    browser_use:
      # é€‰æ‹©å™¨å‚æ•°ç»Ÿä¸€ä¸ºindex
      selector: index
      element_selector: index
      css_selector: index
      xpath: index
      element_index: index
      target: index
      position: index
      number: index
      
      # URLå‚æ•°
      navigate_to_url: url
      target_url: url
      page_url: url
      website: url
      link: url

# é”™è¯¯ä¿®æ­£æ˜ å°„ - å¸¸è§é”™è¯¯çš„è‡ªåŠ¨ä¿®æ­£
error_corrections:
  # åŠ¨ä½œåç§°é”™è¯¯ä¿®æ­£
  action_errors:
    "ä¸æ”¯æŒåŠ¨ä½œ navigate_to_url":
      correct_action: browser_navigate
      correct_tool: browser_use
      
    "ä¸æ”¯æŒåŠ¨ä½œ get_page_content":
      correct_action: browser_extract_content
      correct_tool: browser_use
      
    "ä¸æ”¯æŒåŠ¨ä½œ click_element":
      correct_action: browser_click_element
      correct_tool: browser_use
      
    "ä¸æ”¯æŒåŠ¨ä½œ execute":
      correct_action: microsandbox_execute
      correct_tool: microsandbox
      
    "ä¸æ”¯æŒåŠ¨ä½œ search":
      correct_action: research
      correct_tool: deepsearch

  # å‚æ•°é”™è¯¯ä¿®æ­£
  parameter_errors:
    "ç¼ºå°‘å‚æ•° question":
      parameter_mappings:
        query: question
        search_query: question
        task_description: question
        
    "ç¼ºå°‘å‚æ•° code":
      parameter_mappings:
        script: code
        program: code
        source_code: code
        
    "ç¼ºå°‘å‚æ•° index":
      parameter_mappings:
        selector: index
        element_selector: index
        css_selector: index

# éªŒè¯è§„åˆ™ - ç¡®ä¿æ˜ å°„çš„ä¸€è‡´æ€§
validation_rules:
  # å¿…éœ€çš„å·¥å…·åŠ¨ä½œç»„åˆ
  required_combinations:
    - tool_id: deepsearch
      action: research
      required_params: [question]
      
    - tool_id: microsandbox
      action: microsandbox_execute
      required_params: [code]
      
    - tool_id: browser_use
      action: browser_navigate
      required_params: [url]
      
    - tool_id: browser_use
      action: browser_click_element
      required_params: [index]

  # ç¦ç”¨çš„åŠ¨ä½œç»„åˆ
  deprecated_combinations:
    - tool_id: browser_use
      action: navigate_to_url
      replacement:
        action: browser_navigate
        
    - tool_id: browser_use
      action: get_page_content
      replacement:
        action: browser_extract_content
        
    - tool_id: browser_use
      action: click_element
      replacement:
        action: browser_click_element

# ğŸ”§ å·¥å…·å‚æ•°å®šä¹‰ - ä¸MCPæœåŠ¡å™¨service.jsonå®Œå…¨å¯¹åº”
tool_parameters:
  # MicroSandboxå·¥å…·å‚æ•°å®šä¹‰
  microsandbox:
    microsandbox_execute:
      code:
        type: string
        description: "è¦æ‰§è¡Œçš„Pythonä»£ç "
        required: true
      session_id:
        type: string
        description: "ä¼šè¯æ ‡è¯†ç¬¦"
        required: false
      timeout:
        type: integer
        description: "è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰"
        required: false
    
    microsandbox_install_package:
      package_name:
        type: string
        description: "åŒ…åç§°"
        required: true
      version:
        type: string
        description: "åŒ…ç‰ˆæœ¬"
        required: false
      session_id:
        type: string
        description: "ä¼šè¯æ ‡è¯†ç¬¦"
        required: false
    
    microsandbox_list_sessions: {}
    
    microsandbox_close_session:
      session_id:
        type: string
        description: "è¦å…³é—­çš„ä¼šè¯æ ‡è¯†ç¬¦"
        required: true
    
    microsandbox_cleanup_expired:
      max_age:
        type: integer
        description: "æœ€å¤§å¹´é¾„ç§’æ•°"
        required: false
    
    microsandbox_get_performance_stats: {}
    
    microsandbox_get_health_status: {}

  # Browser Useå·¥å…·å‚æ•°å®šä¹‰
  browser_use:
    browser_navigate:
      url:
        type: string
        description: "è¦è®¿é—®çš„URLåœ°å€"
        required: true
    
    browser_search_google:
      query:
        type: string
        description: "æœç´¢æŸ¥è¯¢è¯"
        required: true
    
    browser_go_back: {}
    
    browser_click_element:
      index:
        type: integer
        description: "è¦ç‚¹å‡»çš„å…ƒç´ ç´¢å¼•"
        required: true
    
    browser_input_text:
      index:
        type: integer
        description: "è¦è¾“å…¥æ–‡æœ¬çš„å…ƒç´ ç´¢å¼•"
        required: true
      text:
        type: string
        description: "è¦è¾“å…¥çš„æ–‡æœ¬"
        required: true
    
    browser_send_keys:
      keys:
        type: string
        description: "è¦å‘é€çš„é”®ï¼Œå¦‚Enterã€Escapeã€Control+cç­‰"
        required: true
    
    browser_scroll_down:
      amount:
        type: integer
        description: "æ»šåŠ¨åƒç´ æ•°ï¼Œä¸æŒ‡å®šåˆ™æ»šåŠ¨ä¸€é¡µ"
        required: false
    
    browser_scroll_up:
      amount:
        type: integer
        description: "æ»šåŠ¨åƒç´ æ•°ï¼Œä¸æŒ‡å®šåˆ™æ»šåŠ¨ä¸€é¡µ"
        required: false
    
    browser_scroll_to_text:
      text:
        type: string
        description: "è¦æ»šåŠ¨åˆ°çš„æ–‡æœ¬å†…å®¹"
        required: true
    
    browser_switch_tab:
      page_id:
        type: integer
        description: "è¦åˆ‡æ¢åˆ°çš„æ ‡ç­¾ID"
        required: true
    
    browser_open_tab:
      url:
        type: string
        description: "è¦åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€çš„URL"
        required: true
    
    browser_close_tab:
      page_id:
        type: integer
        description: "è¦å…³é—­çš„æ ‡ç­¾ID"
        required: true
    
    browser_extract_content:
      goal:
        type: string
        description: "æå–ç›®æ ‡æè¿°"
        required: true
      include_links:
        type: boolean
        description: "æ˜¯å¦åŒ…å«é“¾æ¥ï¼Œé»˜è®¤false"
        required: false
    
    browser_get_ax_tree:
      number_of_elements:
        type: integer
        description: "è¿”å›çš„å…ƒç´ æ•°é‡"
        required: true
    
    browser_get_dropdown_options:
      index:
        type: integer
        description: "ä¸‹æ‹‰èœå•å…ƒç´ çš„ç´¢å¼•"
        required: true
    
    browser_select_dropdown_option:
      index:
        type: integer
        description: "ä¸‹æ‹‰èœå•å…ƒç´ çš„ç´¢å¼•"
        required: true
      text:
        type: string
        description: "è¦é€‰æ‹©çš„é€‰é¡¹æ–‡æœ¬"
        required: true
    
    browser_drag_drop:
      element_source:
        type: string
        description: "æºå…ƒç´ é€‰æ‹©å™¨"
        required: false
      element_target:
        type: string
        description: "ç›®æ ‡å…ƒç´ é€‰æ‹©å™¨"
        required: false
      coord_source_x:
        type: integer
        description: "æºåæ ‡X"
        required: false
      coord_source_y:
        type: integer
        description: "æºåæ ‡Y"
        required: false
      coord_target_x:
        type: integer
        description: "ç›®æ ‡åæ ‡X"
        required: false
      coord_target_y:
        type: integer
        description: "ç›®æ ‡åæ ‡Y"
        required: false
      steps:
        type: integer
        description: "æ‹–æ‹½æ­¥éª¤æ•°ï¼Œé»˜è®¤10"
        required: false
    
    browser_save_pdf: {}
    
    browser_screenshot:
      filename:
        type: string
        description: "æˆªå›¾æ–‡ä»¶åï¼Œå¯é€‰"
        required: false
    
    browser_wait:
      seconds:
        type: number
        description: "ç­‰å¾…çš„ç§’æ•°ï¼Œé»˜è®¤3"
        required: false
    
    browser_done:
      text:
        type: string
        description: "å®Œæˆæè¿°"
        required: true
      success:
        type: boolean
        description: "æ˜¯å¦æˆåŠŸå®Œæˆ"
        required: true
    
    browser_get_page_info: {}
    
    browser_get_current_url: {}
    
    browser_close_session: {}
    
    browser_use_execute_task:
      task:
        type: string
        description: "è¦æ‰§è¡Œçš„ä»»åŠ¡æè¿°ï¼Œä½¿ç”¨è‡ªç„¶è¯­è¨€"
        required: true
      max_steps:
        type: integer
        description: "æœ€å¤§æ‰§è¡Œæ­¥éª¤æ•°ï¼Œé»˜è®¤50"
        required: false
      use_vision:
        type: boolean
        description: "æ˜¯å¦ä½¿ç”¨è§†è§‰ç†è§£ï¼Œé»˜è®¤true"
        required: false

  # DeepSearchå·¥å…·å‚æ•°å®šä¹‰
  deepsearch:
    research:
      question:
        type: string
        description: "ç ”ç©¶é—®é¢˜"
        required: true
      initial_queries:
        type: array
        description: "åˆå§‹æŸ¥è¯¢åˆ—è¡¨"
        required: false
      max_loops:
        type: integer
        description: "æœ€å¤§å¾ªç¯æ¬¡æ•°"
        required: false
    
    quick_research:
      question:
        type: string
        description: "å¿«é€Ÿç ”ç©¶é—®é¢˜"
        required: true
    
    comprehensive_research:
      question:
        type: string
        description: "ç»¼åˆç ”ç©¶é—®é¢˜"
        required: true
      topic_focus:
        type: string
        description: "ä¸»é¢˜èšç„¦"
        required: false

  # Search Toolå·¥å…·å‚æ•°å®šä¹‰
  mcp-search-tool:
    search_file_content:
      file_path:
        type: string
        description: "æ–‡ä»¶è·¯å¾„"
        required: true
      regex_pattern:
        type: string
        description: "æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼"
        required: true
    
    list_code_definitions:
      file_path:
        type: string
        description: "æ–‡ä»¶è·¯å¾„"
        required: false
      directory_path:
        type: string
        description: "ç›®å½•è·¯å¾„"
        required: false
    
    analyze_tool_needs:
      task_description:
        type: string
        description: "ä»»åŠ¡æè¿°"
        required: true
    
    search_and_install_tools:
      task_description:
        type: string
        description: "ä»»åŠ¡æè¿°"
        required: true
      reason:
        type: string
        description: "å®‰è£…åŸå› "
        required: false

# é…ç½®å…ƒæ•°æ®
metadata:
  version: "1.1.0"
  last_updated: "2025-07-03"
  schema_hash: "unified_v1_1_20250703"
  description: "ç»Ÿä¸€çš„å·¥å…·IDå’ŒåŠ¨ä½œæ˜ å°„é…ç½® - ç³»ç»Ÿçš„å•ä¸€çœŸå®æ¥æºï¼ŒåŒ…å«å®Œæ•´å‚æ•°å®šä¹‰"
  maintainer: "Agent Data Platform"